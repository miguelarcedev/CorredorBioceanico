{% extends 'transporte/base.html' %}

{% block content %}
<h3><i class="bi bi-info-circle-fill"></i> Detalles del Viaje</h3>

<table class="table table-bordered">
    <tr><th>Origen</th><td>{{ viaje.origen }}</td></tr>
    <tr><th>Destino</th><td>{{ viaje.destino }}</td></tr>
    <tr><th>Chofer</th><td>{{ viaje.chofer }}</td></tr>
    <tr><th>Vehículo</th><td>{{ viaje.vehiculo }}</td></tr>
    <tr><th>Salida</th><td>{{ viaje.fecha_salida }}</td></tr>
    <tr><th>Estado</th><td>{{ viaje.get_estado_display }}</td></tr>
    <tr><th>QR</th><td>
        {% if viaje.codigo_qr %}
            <img src="{{ viaje.codigo_qr.url }}" width="200">
        {% else %}
            (No generado)
        {% endif %}
    </td></tr>
</table>

<div class="mt-3">
    <a href="{% url 'viaje_edit' viaje.id %}" class="btn btn-warning">
        <i class="bi bi-pencil"></i> Editar
    </a>

    {% if viaje.estado != "CANCELADO" %}
    <a href="{% url 'viaje_cancelar' viaje.id %}" class="btn btn-danger"
       onclick="return confirm('¿Seguro que deseas cancelar este viaje?');">
        <i class="bi bi-x-circle"></i> Cancelar
    </a>
    {% endif %}

    <a href="{% url 'viaje_list' %}" class="btn btn-secondary">Volver</a>
</div>
{% endblock %}
