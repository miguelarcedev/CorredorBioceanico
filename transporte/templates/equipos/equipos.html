{% extends "transporte/base.html" %}

{% block content %}

<!-- Título y acciones -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary">
        <i class="bi bi-hdd-network-fill"></i> Equipos GPS
    </h2>

    
</div>

<!-- Buscador y filtros -->
<div class="card mb-4 shadow-sm border-0">
    <div class="card-body row g-3">

        <div class="col-md-4">
            <input type="text" class="form-control" placeholder="Buscar por nombre, IMEI, vehículo...">
        </div>

        <div class="col-md-3">
            <select class="form-select">
                <option value="">Estado</option>
                <option>Online</option>
                <option>Offline</option>
                <option>En mantenimiento</option>
            </select>
        </div>

        <div class="col-md-3">
            <select class="form-select">
                <option value="">Tipo de Equipo</option>
                <option>GPS</option>
                <option>Sensor</option>
            </select>
        </div>

        <div class="col-md-2 d-grid">
            <button class="btn btn-secondary">
                <i class="bi bi-funnel"></i> Filtrar
            </button>
        </div>

    </div>
</div>

<!-- Tarjetas de equipos -->
<div class="row g-4">

    {% for e in equipos %}
    <div class="col-md-4">
        <div class="card shadow-sm border-0 h-100">

            <!-- Encabezado -->
            <div class="card-header bg-primary text-white d-flex justify-content-between">
                <span><i class="bi bi-cpu-fill"></i> {{ e.nombre }}</span>
                {% if e.estado == "online" %}
                    <span class="badge bg-success">Online</span>
                {% elif e.estado == "offline" %}
                    <span class="badge bg-danger">Offline</span>
                {% else %}
                    <span class="badge bg-warning text-dark">Mantenimiento</span>
                {% endif %}
            </div>

            <!-- Cuerpo -->
            <div class="card-body">
                <p class="mb-1"><strong>IMEI:</strong> {{ e.imei }}</p>
                <p class="mb-1"><strong>Vehículo:</strong> {{ e.vehiculo }}</p>
                <p class="mb-1"><strong>Última conexión:</strong> {{ e.ultima_conexion }}</p>
                <p class="mb-1"><strong>Tipo:</strong> {{ e.tipo }}</p>
            </div>

            <!-- Pie -->
            <div class="card-footer bg-light d-flex justify-content-between">
                <a href="{% url 'equipos_detalle' e.id %}" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-info-circle"></i> Ver
                </a>
                <a href="{% url 'equipos_editar' e.id %}" class="btn btn-sm btn-outline-warning">
                    <i class="bi bi-pencil"></i> Editar
                </a>
                <a href="{% url 'equipos_eliminar' e.id %}" class="btn btn-sm btn-outline-danger">
                    <i class="bi bi-trash"></i> Borrar
                </a>
            </div>

        </div>
    </div>
    {% empty %}
    <p class="text-center text-muted">No hay equipos registrados.</p>
    {% endfor %}

</div>

{% endblock %}
